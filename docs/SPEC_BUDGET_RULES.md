# SPEC_BUDGET_RULES

## Принцип

Бюджет — это ограничение первого класса. Если появляется конфликт, сначала защищаем бюджет, затем удобство, затем остальные факторы.

## Модель бюджета

- Поддерживаются 3 горизонта:
  - день,
  - неделя,
  - месяц.
- В планировании всегда есть активный бюджетный контекст:
  - если задан день — считается per-day/per-meal;
  - если задана неделя — строится дневной лимит из weekly;
  - если задан месяц — строится недельный и дневной ориентир.

## Strictness

- `strict`: превышение запрещено.
- `soft`: допускается до 5% сверху (по умолчанию).

## Оценка цены

Приоритет источников цены:
1. пользовательская история и чеки,
2. известные цены продукта,
3. категории/fallback.

Если цена приблизительная:
- возвращаем `approximate=true`,
- показываем это в “Почему?”.

## Правила выбора блюд

- При дефиците бюджета система сильнее штрафует дорогие варианты.
- Система может предлагать повтор блюд для экономии.
- Приоритет у блюд, которые используют имеющийся инвентарь.

## Кнопка “Make it cheaper”

- One-tap режим пересборки недели.
- Цель: снизить стоимость с минимальным disruption.
- Прошедшие дни не меняем.
