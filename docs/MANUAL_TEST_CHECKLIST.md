# Manual Test Checklist (Xcode + iPhone)

Дата проверки: `____-__-__`  
Тестер: `____________`

Статусы:
- `PASS` — работает как ожидается
- `FAIL` — поведение не соответствует ожидаемому
- `BLOCKED` — нельзя проверить из-за окружения

## 1) Preflight окружения

| Шаг | Ожидаемый результат | Статус | Комментарий |
|---|---|---|---|
| Backend запущен в `/Users/antonpyatnica/Downloads/ProjectVay/backend` (`npm run dev`) | Сервер стартует на `:8080` |  |  |
| `GET http://127.0.0.1:8080/health` | Ответ `{ "ok": true }` |  |  |
| Открыт проект `/Users/antonpyatnica/Downloads/ProjectVay/ios/InventoryAI.xcodeproj` | Проект открывается без ошибок |  |  |
| Схема `InventoryAI`, запуск на `iPhone 17 (iOS 26.2)` | App стартует в симуляторе |  |  |
| Для реального iPhone задан `RECIPE_SERVICE_BASE_URL=http://<LAN-IP-Mac>:8080` | Home/План могут ходить в backend |  |  |

## 2) Онбординг

| Шаг | Ожидаемый результат | Статус | Комментарий |
|---|---|---|---|
| Первый запуск приложения | Показывается онбординг |  |  |
| Сохранить quiet hours, дни 5/3/1, бюджет, магазины, дизлайки | Настройки сохраняются |  |  |
| Завершить онбординг и перезапустить приложение | Онбординг больше не показывается |  |  |

## 3) Инвентарь

| Шаг | Ожидаемый результат | Статус | Комментарий |
|---|---|---|---|
| Добавить товар вручную с партией | Товар и партия видны в зоне хранения |  |  |
| Изменить партию (кол-во/срок/зона) | Изменения сохраняются |  |  |
| Списать партию из `InventoryView` (swipe) | Партия уменьшается или удаляется |  |  |
| В карточке товара `Открыть/Закрыть` партию | Флаг состояния партии меняется |  |  |
| Добавить цену по магазину | Цена появляется в истории |  |  |
| Поиск по имени/бренду/штрихкоду | Список корректно фильтруется |  |  |

## 4) Уведомления сроков

| Шаг | Ожидаемый результат | Статус | Комментарий |
|---|---|---|---|
| Создать партию со сроком годности | Планируются напоминания 5/3/1 |  |  |
| Включить quiet hours, пересохранить настройки | Уведомления перепланируются вне quiet hours |  |  |
| Изменить `expiryDate` партии | Старые pending уведомления отменены, новые созданы |  |  |
| Удалить партию | Уведомления по партии удалены |  |  |

## 5) Сканер

| Шаг | Ожидаемый результат | Статус | Комментарий |
|---|---|---|---|
| Симулятор: открыть сканер | Показывается fallback с ручным вводом |  |  |
| Ввести код вручную в режиме `Добавление` | Товар находится/создаётся локально |  |  |
| В режиме `Списание` отсканировать существующий товар | Срабатывает `Быстро −1` |  |  |
| iPhone: live scan камерой | Распознаётся код и доступны quick actions |  |  |

## 6) Home / План

| Шаг | Ожидаемый результат | Статус | Комментарий |
|---|---|---|---|
| Открыть `Что приготовить` при поднятом backend | Появляются рекомендации рецептов |  |  |
| Открыть `План` и нажать `Сгенерировать` | Строится план (день/неделя), shopping list и стоимость |  |  |
| Выключить backend и обновить Home/План | Показано контролируемое сообщение об ошибке сервиса |  |  |

## 7) HealthKit / Progress

| Шаг | Ожидаемый результат | Статус | Комментарий |
|---|---|---|---|
| iPhone: дать доступ к HealthKit | Разрешение запрошено и сохраняется |  |  |
| При наличии данных Apple Health/Yazio открыть `Прогресс` | Подтягиваются вес/жир/КБЖУ за сегодня |  |  |
| Открыть `План` после синхронизации Yazio | Таргет следующего приёма учитывает уже съеденное КБЖУ |  |  |

## 8) Настройки данных

| Шаг | Ожидаемый результат | Статус | Комментарий |
|---|---|---|---|
| Экспортировать JSON | Файл экспорта создаётся |  |  |
| Импортировать экспорт обратно | Данные восстанавливаются |  |  |
| Удалить локальные данные | Товары/партии/цены/история очищены |  |  |

## 9) Ожидаемые ограничения

| Ограничение | Ожидаемое поведение | Статус | Комментарий |
|---|---|---|---|
| Live-сканер в симуляторе | Не работает, доступен fallback ручного ввода |  |  |
| HealthKit без разрешений/данных | Показаны дефолтные значения или статус о недоступности |  |  |
| Внешние barcode-провайдеры без ключей | Lookup ограничен локальной базой и Open Food Facts (если включён) |  |  |
