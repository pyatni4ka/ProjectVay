# CLAUDE.md ‚Äî ProjectVay

> –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, —É–ª—É—á—à–µ–Ω–∏—è –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞.
> –õ—é–±–æ–π –∞–≥–µ–Ω—Ç (Claude, Gemini, —á–µ–ª–æ–≤–µ–∫) –¥–æ–ª–∂–µ–Ω –ø–æ–Ω—è—Ç—å –∏–∑ —ç—Ç–æ–≥–æ —Ñ–∞–π–ª–∞: **—á—Ç–æ –¥–µ–ª–∞–µ–º, –≥–¥–µ –∫–æ–¥, –∫–∞–∫ –ø—Ä–æ–≤–µ—Ä—è–µ–º, –∫—É–¥–∞ –¥–≤–∏–≥–∞–µ–º—Å—è**.

---

## A. –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

**ProjectVay** ‚Äî iOS-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–º–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–º–∞—à–Ω–∏–º–∏ –∑–∞–ø–∞—Å–∞–º–∏, –Ω—É—Ç—Ä–∏–µ–Ω—Ç–∞–º–∏ –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º –ø–∏—Ç–∞–Ω–∏—è.

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

- **–ó–∞–ø–∞—Å—ã (Inventory)** ‚Äî —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —à—Ç—Ä–∏—Ö–∫–æ–¥–æ–≤, —É—á—ë—Ç –ø—Ä–æ–¥—É–∫—Ç–æ–≤, —Å—Ä–æ–∫–∏ –≥–æ–¥–Ω–æ—Å—Ç–∏, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- **–ù—É—Ç—Ä–∏–µ–Ω—Ç—ã (Nutrition)** ‚Äî —Ä–∞—Å—á—ë—Ç –ö–ë–ñ–£, –¥–µ—Ñ–∏—Ü–∏—Ç–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏, —Ü–µ–ª–∏ (–ø–æ—Ö—É–¥–µ–Ω–∏–µ / –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ / –Ω–∞–±–æ—Ä)
- **–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∏—Ç–∞–Ω–∏—è (Meal Plan)** ‚Äî –Ω–µ–¥–µ–ª—å–Ω—ã–π –∞–≤—Ç–æ–ø–∏–ª–æ—Ç, —Ä–µ—Ü–µ–ø—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–∞–ø–∞—Å–æ–≤, —Å–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫
- **–ü—Ä–æ–≥—Ä–µ—Å—Å –∑–¥–æ—Ä–æ–≤—å—è (Health)** ‚Äî –≥—Ä–∞—Ñ–∏–∫–∏ –≤–µ—Å–∞ –∏–∑ HealthKit, –º–µ—Ç—Ä–∏–∫–∏ —Ç–µ–ª–∞, –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è

### –¶–µ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

- –°–Ω–∏–∑–∏—Ç—å –≤–µ—Å / –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –ø–∏—Ç–∞–Ω–∏–µ
- –£–º–µ–Ω—å—à–∏—Ç—å –ø–∏—â–µ–≤—ã–µ –æ—Ç—Ö–æ–¥—ã
- –ü–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –º–µ–Ω—é –Ω–∞ –Ω–µ–¥–µ–ª—é
- –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ —Ç–µ–ª–∞

### –ü–ª–∞—Ç—Ñ–æ—Ä–º—ã

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–µ–∫ |
|-----------|------|
| iOS-–∫–ª–∏–µ–Ω—Ç | Swift, SwiftUI, GRDB, HealthKit, Vision |
| Backend | Node.js, TypeScript, Express, SQLite |

---

## B. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –∫–∞—Ä—Ç–∞

### iOS (`ios/`)

```
ios/
‚îú‚îÄ‚îÄ App/                          # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è, DI
‚îÇ   ‚îú‚îÄ‚îÄ InventoryAIApp.swift      # @main
‚îÇ   ‚îú‚îÄ‚îÄ AppCoordinator.swift
‚îÇ   ‚îú‚îÄ‚îÄ AppDependencies.swift
‚îÇ   ‚îú‚îÄ‚îÄ AppConfig.swift
‚îÇ   ‚îú‚îÄ‚îÄ RootTabView.swift
‚îÇ   ‚îî‚îÄ‚îÄ AppIntents/               # Siri Shortcuts (GeneratePlanIntent, CheckExpiryIntent, AddProductIntent)
‚îú‚îÄ‚îÄ Features/                     # –≠–∫—Ä–∞–Ω—ã, —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ —Ñ–∏—á–∞–º
‚îÇ   ‚îú‚îÄ‚îÄ Home/                     # HomeView, LogFoodSheet
‚îÇ   ‚îú‚îÄ‚îÄ Inventory/                # InventoryView, ProductDetailView, AddProductView, EditBatchView
‚îÇ   ‚îú‚îÄ‚îÄ MealPlan/                 # MealPlanView, WeeklyAutopilotView, CookNowView, DeviationSheetView, ShoppingListView, RecipeSearchSheet
‚îÇ   ‚îú‚îÄ‚îÄ Onboarding/               # OnboardingView, OnboardingFlowView
‚îÇ   ‚îú‚îÄ‚îÄ Progress/                 # ProgressView
‚îÇ   ‚îú‚îÄ‚îÄ Recipe/                   # RecipeView
‚îÇ   ‚îú‚îÄ‚îÄ ReceiptScan/              # ReceiptScanView
‚îÇ   ‚îú‚îÄ‚îÄ Scanner/                  # ScannerView
‚îÇ   ‚îî‚îÄ‚îÄ Settings/                 # SettingsView, DietSettingsView, BodyMetricsView, SettingsAchievementsView, SettingsRowView, SettingsStatisticsView
‚îú‚îÄ‚îÄ Services/                     # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ NutritionCalculator.swift # –†–∞—Å—á—ë—Ç –ö–ë–ñ–£
‚îÇ   ‚îú‚îÄ‚îÄ ProductNameFormatter.swift# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ ProductClassifier.swift   # –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ BarcodeLookupService.swift# –ü–æ–∏—Å–∫ –ø–æ —à—Ç—Ä–∏—Ö–∫–æ–¥—É
‚îÇ   ‚îú‚îÄ‚îÄ BarcodeLookupProviders.swift
‚îÇ   ‚îú‚îÄ‚îÄ HealthKitService.swift    # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è HealthKit
‚îÇ   ‚îú‚îÄ‚îÄ InventoryService.swift    # CRUD –∑–∞–ø–∞—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ SettingsService.swift     # –ù–∞—Å—Ç—Ä–æ–π–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ LocalRecipeCatalog.swift  # –õ–æ–∫–∞–ª—å–Ω—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ RecipeServiceClient.swift # API-–∫–ª–∏–µ–Ω—Ç —Ä–µ—Ü–µ–ø—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ GamificationService.swift # –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ ScannerService.swift      # –ö–∞–º–µ—Ä–∞ + —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ PredictionService.swift   # –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è —Å—Ä–æ–∫–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ NotificationScheduler.swift
‚îÇ   ‚îú‚îÄ‚îÄ ReceiptScannerService.swift
‚îÇ   ‚îú‚îÄ‚îÄ DynamicChartScaleDomain.swift
‚îÇ   ‚îî‚îÄ‚îÄ BodyMetricsTimeRange.swift
‚îú‚îÄ‚îÄ Models/
‚îÇ   ‚îú‚îÄ‚îÄ DomainModels.swift        # Product, AppSettings, Batch, etc.
‚îÇ   ‚îú‚îÄ‚îÄ DTOs.swift                # –°–µ—Ç–µ–≤—ã–µ –º–æ–¥–µ–ª–∏
‚îÇ   ‚îî‚îÄ‚îÄ Achievements.swift        # –ú–æ–¥–µ–ª—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
‚îú‚îÄ‚îÄ Persistence/
‚îÇ   ‚îú‚îÄ‚îÄ Database.swift            # GRDB setup
‚îÇ   ‚îú‚îÄ‚îÄ Migrations.swift          # –°—Ö–µ–º–∞ –ë–î
‚îÇ   ‚îî‚îÄ‚îÄ Records/                  # ProductRecord, BatchRecord, AppSettingsRecord, etc.
‚îú‚îÄ‚îÄ Repositories/
‚îÇ   ‚îú‚îÄ‚îÄ InventoryRepository.swift # –î–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º –∑–∞–ø–∞—Å–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ SettingsRepository.swift  # –î–æ—Å—Ç—É–ø –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º
‚îú‚îÄ‚îÄ Shared/
‚îÇ   ‚îú‚îÄ‚îÄ DesignSystem.swift        # –¶–≤–µ—Ç–∞, —Ç–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞, –æ—Ç—Å—Ç—É–ø—ã, –∞–Ω–∏–º–∞—Ü–∏–∏, —Ö–∞–ø—Ç–∏–∫–∏ (VayFont, VaySpacing, Color.vay*)
‚îÇ   ‚îú‚îÄ‚îÄ Theme.swift               # –¢–µ–º–∞
‚îÇ   ‚îî‚îÄ‚îÄ Components/               # –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (StatCard, GlassCard, NutritionRing, EmptyStateView, PredictionsCard)
‚îú‚îÄ‚îÄ DataSources/Seed/
‚îÇ   ‚îî‚îÄ‚îÄ recipes_seed.json         # –°–∏–¥–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —Ä–µ—Ü–µ–ø—Ç–æ–≤
‚îî‚îÄ‚îÄ Tests/InventoryCoreTests/     # 22 —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–∞ (unit + integration)
```

### Backend (`backend/`)

```
backend/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ server.ts                 # Express entry point
‚îÇ   ‚îú‚îÄ‚îÄ config/                   # env.ts, recipeSources.ts
‚îÇ   ‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ health.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ v1/                   # index.ts, recipes.ts
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ mealPlan.ts           # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–ª–∞–Ω–æ–≤ –ø–∏—Ç–∞–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ recommendation.ts     # –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Ä–µ—Ü–µ–ø—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ weeklyAutopilot.ts    # –ù–µ–¥–µ–ª—å–Ω—ã–π –∞–≤—Ç–æ–ø–∏–ª–æ—Ç
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ barcodeLookup.ts      # –®—Ç—Ä–∏—Ö–∫–æ–¥—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ recipeScraper.ts      # –ü–∞—Ä—Å–∏–Ω–≥ —Ä–µ—Ü–µ–ø—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ externalRecipes.ts    # –í–Ω–µ—à–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ personalization.ts    # –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ recipeIndex.ts        # –ò–Ω–¥–µ–∫—Å —Ä–µ—Ü–µ–ø—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îú‚îÄ‚îÄ ingestion/                # –ê–¥–∞–ø—Ç–µ—Ä—ã –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (eda.ru, povar.ru, magnit, etc.)
‚îÇ   ‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ mockRecipes.ts        # –ö–∞—Ç–∞–ª–æ–≥ —Ä–µ—Ü–µ–ø—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ middleware/               # cors, helmet, rateLimit, error
‚îÇ   ‚îú‚îÄ‚îÄ types/                    # contracts.ts
‚îÇ   ‚îî‚îÄ‚îÄ utils/                    # logger.ts, normalize.ts
‚îú‚îÄ‚îÄ test/                         # 10 —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ mealPlan.test.ts
‚îÇ   ‚îú‚îÄ‚îÄ recommendation.test.ts
‚îÇ   ‚îú‚îÄ‚îÄ weeklyAutopilot.test.ts
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îî‚îÄ‚îÄ package.json
```

---

## C. UX –∏ –¥–∏–∑–∞–π–Ω-–ø—Ä–∏–Ω—Ü–∏–ø—ã

> ¬´–°–µ–≤–µ—Ä–Ω–∞—è –∑–≤–µ–∑–¥–∞¬ª: –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –≤—ã–≥–ª—è–¥–µ—Ç—å **—Ç—ë–ø–ª—ã–º, –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–º –∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–º** ‚Äî –∫–∞–∫ –ø—Ä–æ–¥—É–∫—Ç –¥–ª—è —Å–µ–±—è, –∫–æ—Ç–æ—Ä—ã–º —Ö–æ—á–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å.

### C.1 –î–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º–∞ (`ios/Shared/DesignSystem.swift`)

–í—Å–µ —ç–∫—Ä–∞–Ω—ã **–æ–±—è–∑–∞–Ω—ã** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–∫–µ–Ω—ã –∏–∑ `DesignSystem.swift`:

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –¢–æ–∫–µ–Ω—ã | –ü—Ä–∏–º–µ—Ä—ã |
|-----------|--------|---------|
| –¶–≤–µ—Ç–∞ | `Color.vayPrimary`, `.vayAccent`, `.vayWarning`, `.vayDanger`, `.vaySuccess` | –§–æ–Ω: `.vayBackground`, `.vayCardBackground` |
| –ú–∞–∫—Ä–æ-—Ü–≤–µ—Ç–∞ | `.vayCalories`, `.vayProtein`, `.vayFat`, `.vayCarbs` | –ö–æ–ª—å—Ü–∞ –ö–ë–ñ–£ |
| –¢–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞ | `VayFont.hero()`, `.title()`, `.body()`, `.caption()` | –ó–∞–≥–æ–ª–æ–≤–∫–∏, –ø–æ–¥–ø–∏—Å–∏ |
| –û—Ç—Å—Ç—É–ø—ã | `VaySpacing.xs/sm/md/lg/xl` | Padding, spacing |

### C.2 –ï–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å —Å—Ç—Ä–æ–∫ (Card/Row)

–í—Å–µ —Å–ø–∏—Å–∫–∏ –∏ —Å–µ–∫—Ü–∏–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏—Å–ø–æ–ª—å–∑—É—é—Ç **–æ–¥–Ω—É –∏ —Ç—É –∂–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å—Ç—Ä–æ–∫–∏**:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ [icon]  Title                   Value ‚ñ∏‚îÇ
‚îÇ         Subtitle / description         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

- –ò–∫–æ–Ω–∫–∞: SF Symbol, `frame(width: 20)`, `.foregroundStyle(Color.vayPrimary)`
- –ó–∞–≥–æ–ª–æ–≤–æ–∫: `VayFont.body(15)`, `.primary`
- –ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫: `VayFont.caption()`, `.secondary`
- –ó–Ω–∞—á–µ–Ω–∏–µ/–±–µ–π–¥–∂: trailing, `.font(.subheadline)`
- cornerRadius: `12`
- Padding: `VaySpacing.sm` –≤–Ω—É—Ç—Ä–∏, `VaySpacing.md` –º–µ–∂–¥—É —Å–µ–∫—Ü–∏—è–º–∏
- –í—ã–±—Ä–∞–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ: —Ñ–æ–Ω `Color.vayPrimary.opacity(0.12)`, —Ä–∞–º–∫–∞ `Color.vayPrimary`

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è: `ios/Features/Settings/SettingsRowView.swift`

### C.3 –°–ø–∏—Å–∫–∏ (InventoryView, –∏ —Ç.–¥.)

- –ò–µ—Ä–∞—Ä—Ö–∏—è —á—Ç–µ–Ω–∏—è: –∑–∞–≥–æ–ª–æ–≤–æ–∫ ‚Üí –≤—Ç–æ—Ä–∏—á–Ω—ã–π —Ç–µ–∫—Å—Ç ‚Üí –±–µ–π–¥–∂
- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤: `48√ó48`, `cornerRadius(8)`
- –ü—É—Å—Ç—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è: –∏–∫–æ–Ω–∫–∞ + –∑–∞–≥–æ–ª–æ–≤–æ–∫ + –ø–æ–¥—Å–∫–∞–∑–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è
- Skeleton-–ª–æ–∞–¥–µ—Ä—ã: `redacted(reason: .placeholder)` –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ

### C.4 –ì—Ä–∞—Ñ–∏–∫–∏

- –ü—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö: –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –ø–æ –¥–∞—Ç–µ, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞, –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤—ã–±—Ä–æ—Å–æ–≤
- –ë–µ–∑ –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —à—É–º–∞: –Ω–µ—Ç –ø–∞–¥–µ–Ω–∏–π –¥–æ –Ω—É–ª—è, –Ω–µ—Ç ¬´–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã—Ö —Å—Ç–µ–Ω¬ª
- –°—Ç–∞–±–∏–ª—å–Ω–∞—è –æ—Å—å Y: `DynamicChartScaleDomain.swift`

### C.5 –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å (Accessibility)

- Dynamic Type ‚Äî –≤—Å–µ —à—Ä–∏—Ñ—Ç—ã —á–µ—Ä–µ–∑ `VayFont.*`
- –ö–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–æ—Å—Ç—å ‚Äî –º–∏–Ω–∏–º—É–º 4.5:1 –¥–ª—è —Ç–µ–∫—Å—Ç–∞
- VoiceOver labels –¥–ª—è –∏–∫–æ–Ω–æ–∫ –∏ –±–µ–π–¥–∂–µ–π

### C.6 –¢—ë–º–Ω–∞—è —Ç–µ–º–∞

- –í—Å–µ —Ü–≤–µ—Ç–∞ —á–µ—Ä–µ–∑ `DesignSystem.swift` (–∏—Å–ø–æ–ª—å–∑—É—é—Ç system colors ‚Üí –∞–≤—Ç–æ–∞–¥–∞–ø—Ç–∞—Ü–∏—è)
- –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ö–∞—Ä–¥–∫–æ–¥ `Color.white` / `Color.black`
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å: `.preferredColorScheme(.dark)` –≤ Preview

---

## D. –°–ª–µ–¥—É—é—â–∞—è UX-–∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–∞: Unified Settings Pickers

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

- **Deficit Profile** (`DietSettingsView.swift`) ‚Äî —É–∂–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–µ–Ω –≤ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏
- **Smart-optimizer picker** ‚Äî –ø–æ–∫–∞ –æ–±—ã—á–Ω—ã–π `Picker`
- **Goal picker** ‚Äî –ø–æ–∫–∞ –æ–±—ã—á–Ω—ã–π `Picker`

### –¶–µ–ª—å

–ü—Ä–∏–≤–µ—Å—Ç–∏ **–≤—Å–µ —Ç—Ä–∏ —Å–µ–∫—Ü–∏–∏** –∫ –µ–¥–∏–Ω–æ–º—É –≤–∏–∑—É–∞–ª—å–Ω–æ–º—É –ø–∞—Ç—Ç–µ—Ä–Ω—É:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üî•     ‚îÇ  ‚îÇ  ‚öñÔ∏è      ‚îÇ  ‚îÇ  üí™     ‚îÇ
‚îÇ –ú—è–≥–∫–∏–π  ‚îÇ  ‚îÇ –°—Ä–µ–¥–Ω–∏–π  ‚îÇ  ‚îÇ –ñ—ë—Å—Ç–∫–∏–π ‚îÇ
‚îÇ -300–∫–∫–∞–ª‚îÇ  ‚îÇ -500–∫–∫–∞–ª ‚îÇ  ‚îÇ -700–∫–∫–∞–ª‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
   border        ‚úÖ fill      border
```

- –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π `ScrollView` —Å –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏
- –ö–∞–∂–¥–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞: –∏–∫–æ–Ω–∫–∞ + –∑–∞–≥–æ–ª–æ–≤–æ–∫ + –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
- –í—ã–±—Ä–∞–Ω–Ω–∞—è: `Color.vayPrimary` fill, –±–µ–ª—ã–π —Ç–µ–∫—Å—Ç
- –ù–µ–≤—ã–±—Ä–∞–Ω–Ω—ã–µ: `Color.vayCardBackground`, border `Color.vayPrimary.opacity(0.3)`
- cornerRadius: `16`, padding: `VaySpacing.md`

### –í–∞–∂–Ω–æ

- **UI-only** ‚Äî –ª–æ–≥–∏–∫–∞ —Ä–∞—Å—á—ë—Ç–æ–≤ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è
- –§–∞–π–ª: `ios/Features/Settings/DietSettingsView.swift`
- –°—Ç–∏–ª–∏: `ios/Shared/DesignSystem.swift`

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏

- [ ] –í—Å–µ —Ç—Ä–∏ –ø–∏–∫–µ—Ä–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏
- [ ] –í—ã–±—Ä–∞–Ω–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç –≤–∏–∑—É–∞–ª—å–Ω–æ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è (fill + —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞)
- [ ] –ê–Ω–∏–º–∞—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è `.spring()`
- [ ] VoiceOver: –∫–∞–∂–¥–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –æ–∑–≤—É—á–∏–≤–∞–µ—Ç—Å—è (—Ä–æ–ª—å, –≤—ã–±—Ä–∞–Ω–æ/–Ω–µ—Ç)
- [ ] –¢—ë–º–Ω–∞—è —Ç–µ–º–∞: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ç—Ä–∞—Å—Ç
- [ ] –°–±–æ—Ä–∫–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç –±–µ–∑ –æ—à–∏–±–æ–∫

---

## E. –ö–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏

> Xcode-—Å—Ö–µ–º—ã: **InventoryAI** (app + —Ç–µ—Å—Ç—ã), **InventoryCore** (framework + —Ç–µ—Å—Ç—ã)

### iOS ‚Äî —Å–±–æ—Ä–∫–∞ (–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)

```bash
xcodebuild -project ios/InventoryAI.xcodeproj \
  -scheme InventoryAI \
  -destination 'platform=iOS Simulator,name=iPhone 17 Pro' \
  build
```

### iOS ‚Äî —Ç–µ—Å—Ç—ã (—á–µ—Ä–µ–∑ —Å—Ö–µ–º—É InventoryAI)

```bash
xcodebuild -project ios/InventoryAI.xcodeproj \
  -scheme InventoryAI \
  -destination 'platform=iOS Simulator,name=iPhone 17 Pro' \
  test
```

### iOS ‚Äî —Ç–µ—Å—Ç—ã (—á–µ—Ä–µ–∑ —Å—Ö–µ–º—É InventoryCore)

```bash
xcodebuild -project ios/InventoryAI.xcodeproj \
  -scheme InventoryCore \
  -destination 'platform=iOS Simulator,name=iPhone 17 Pro' \
  test
```

### Backend ‚Äî —Ç–µ—Å—Ç—ã

```bash
cd backend && npm test
```

### Backend ‚Äî –∑–∞–ø—É—Å–∫ (dev)

```bash
cd backend && npm run dev
```

### Backend ‚Äî —Å–±–æ—Ä–∫–∞

```bash
cd backend && npm run build
```

### Backend ‚Äî –ª–∏–Ω—Ç–µ—Ä

```bash
cd backend && npm run lint
```

---

## F. Definition of Done (–ß–µ–∫–ª–∏—Å—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ PR)

–ö–∞–∂–¥—ã–π PR / –∏—Ç–µ—Ä–∞—Ü–∏—è –¥–æ–ª–∂–Ω—ã —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è—Ç—å:

- [ ] **–°–±–æ—Ä–∫–∞** ‚Äî `xcodebuild build` –ø—Ä–æ—Ö–æ–¥–∏—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] **–¢–µ—Å—Ç—ã iOS** ‚Äî `xcodebuild test` –ø—Ä–æ—Ö–æ–¥–∏—Ç (–≤—Å–µ 22+ —Ç–µ—Å—Ç-—Ñ–∞–π–ª–∞)
- [ ] **–¢–µ—Å—Ç—ã Backend** ‚Äî `cd backend && npm test` –ø—Ä–æ—Ö–æ–¥–∏—Ç (–µ—Å–ª–∏ –∑–∞—Ç—Ä–æ–Ω—É—Ç backend)
- [ ] **–ù–µ—Ç –∫—Ä–∞—à–µ–π** –≤ –∫–ª—é—á–µ–≤—ã—Ö —Ñ–ª–æ—É:
  - –°–ø–∏—Å–æ–∫ –∑–∞–ø–∞—Å–æ–≤ (Inventory)
  - –í—ã–±–æ—Ä –º–∞–≥–∞–∑–∏–Ω–∞ (Store picker)
  - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–ª–∞–Ω–∞ –ø–∏—Ç–∞–Ω–∏—è (MealPlan)
  - –ì—Ä–∞—Ñ–∏–∫ –º–µ—Ç—Ä–∏–∫ —Ç–µ–ª–∞ (BodyMetrics chart)
- [ ] **UI-–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** ‚Äî –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–∫–µ–Ω—ã –∏–∑ `DesignSystem.swift`
- [ ] **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** ‚Äî –Ω–µ—Ç –ª–∏—à–Ω–∏—Ö —Ä–µ-—Ä–µ–Ω–¥–µ—Ä–æ–≤, –∏–∑–±—ã—Ç–æ—á–Ω—ã—Ö —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- [ ] **Accessibility** ‚Äî Dynamic Type, VoiceOver labels, –∫–æ–Ω—Ç—Ä–∞—Å—Ç ‚â• 4.5:1
- [ ] **–¢—ë–º–Ω–∞—è —Ç–µ–º–∞** ‚Äî –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —ç–∫—Ä–∞–Ω—ã

---

## G. –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø—Ä–æ–º–ø—Ç–æ–≤ (Prompt Library)

> –ì–æ—Ç–æ–≤—ã–µ –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ñ–∏—á. –ö–∞–∂–¥—ã–π –ø—Ä–æ–º–ø—Ç ‚Äî —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π: —Ü–µ–ª—å, —Ñ–∞–π–ª—ã, —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è, –ø—Ä–æ–≤–µ—Ä–∫–∞.

---

### –ü—Ä–æ–º–ø—Ç 2: –ö—Ä–∞—Å–∏–≤—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤ + —Ñ–æ—Ç–æ + —É–ª—É—á—à–µ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ ¬´–ó–∞–ø–∞—Å—ã¬ª

**–¶–µ–ª—å:** –ü–µ—Ä–µ–¥–µ–ª–∞—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –≤ InventoryView ‚Äî —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è, —Ñ–æ—Ç–æ, —É–¥–æ–±–Ω–∞—è —Å—Ç—Ä–æ–∫–∞.

**–§–∞–π–ª—ã:**
- `ios/Features/Inventory/InventoryView.swift`
- `ios/Features/Inventory/ProductDetailView.swift`
- `ios/Services/ProductNameFormatter.swift`
- `ios/Models/DomainModels.swift` (Product: name, brand, category, imageURL)

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**

1. **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏–π** ‚Äî –¥–ª–∏–Ω–Ω—ã–µ –∏–º–µ–Ω–∞ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:
   - Capitalize, —É–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã —Å–ª–æ–≤, –≤—ã–Ω–µ—Å—Ç–∏ –æ–±—ä—ë–º/–≤–µ—Å –≤ –±–µ–π–¥–∂
   - –ü—Ä–∏–º–µ—Ä:
     `"–ú–û–õ–û–ö–û –î–û–ú–ò–ö –í –î–ï–†–ï–í–ù–ï 3.2% –£–õ–¨–¢–†–ê–ü–ê–°–¢–ï–†–ò–ó–û–í–ê–ù–ù–û–ï 950–ú–õ"` ‚Üí
     `"–ú–æ–ª–æ–∫–æ –î–æ–º–∏–∫ –≤ –¥–µ—Ä–µ–≤–Ω–µ 3.2%"` + –±–µ–π–¥–∂ `950–º–ª`

2. **–§–æ—Ç–æ –ø—Ä–æ–¥—É–∫—Ç–∞:**
   - –ï—Å–ª–∏ `imageURL` –µ—Å—Ç—å ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å —á–µ—Ä–µ–∑ Nuke/NukeUI (`LazyImage`)
   - –ò–Ω–∞—á–µ ‚Üí SF Symbol –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
   - –†–∞–∑–º–µ—Ä: `48√ó48`, `cornerRadius(8)`

3. **–°—Ç—Ä–æ–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–∞:**
   - –§–æ—Ç–æ (—Å–ª–µ–≤–∞)
   - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ
   - –°—Ä–æ–∫ –≥–æ–¥–Ω–æ—Å—Ç–∏ + ¬´–¥–Ω–µ–π –æ—Å—Ç–∞–ª–æ—Å—å¬ª:
     - –ó–µ–ª—ë–Ω—ã–π `>5` –¥–Ω–µ–π
     - –ñ—ë–ª—Ç—ã–π `2‚Äì5` –¥–Ω–µ–π
     - –ö—Ä–∞—Å–Ω—ã–π `<2` –¥–Ω–µ–π
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ + –µ–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è ‚Äî trailing –±–µ–π–¥–∂

4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∏–ª–∏ –∏–∑ `DesignSystem.swift`

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**

```bash
xcodebuild -project ios/InventoryAI.xcodeproj \
  -scheme InventoryAI \
  -destination 'platform=iOS Simulator,name=iPhone 17 Pro' \
  build
```

---

### –ü—Ä–æ–º–ø—Ç 4: –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ä–∞—Å—á—ë—Ç –ö–ë–ñ–£ –ø–æ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–º —Ñ–æ—Ä–º—É–ª–∞–º

**–¶–µ–ª—å:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ç–æ—á–Ω—ã–π —Ä–∞—Å—á—ë—Ç BMR ‚Üí TDEE ‚Üí —Ü–µ–ª–µ–≤—ã—Ö –∫–∞–ª–æ—Ä–∏–π ‚Üí –º–∞–∫—Ä–æ–Ω—É—Ç—Ä–∏–µ–Ω—Ç–æ–≤ –ø–æ –Ω–∞—É—á–Ω—ã–º —Ñ–æ—Ä–º—É–ª–∞–º.

**–§–∞–π–ª—ã:**
- `ios/Services/NutritionCalculator.swift`
- `ios/Models/DomainModels.swift` (AppSettings: kcalGoal, proteinGoalGrams, –∏ —Ç.–¥.)
- `ios/Features/Settings/BodyMetricsView.swift`

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**

1. **BMR ‚Äî Mifflin‚ÄìSt Jeor (ADA 2005):**
   - –ú—É–∂—á–∏–Ω—ã: `10 √ó –≤–µ—Å(–∫–≥) + 6.25 √ó —Ä–æ—Å—Ç(—Å–º) ‚àí 5 √ó –≤–æ–∑—Ä–∞—Å—Ç + 5`
   - –ñ–µ–Ω—â–∏–Ω—ã: `10 √ó –≤–µ—Å(–∫–≥) + 6.25 √ó —Ä–æ—Å—Ç(—Å–º) ‚àí 5 √ó –≤–æ–∑—Ä–∞—Å—Ç ‚àí 161`
   - –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç ‚Üí fallback –Ω–∞ Harris‚ÄìBenedict

2. **TDEE = BMR √ó –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:**
   | –£—Ä–æ–≤–µ–Ω—å | –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç |
   |---------|-------------|
   | –°–∏–¥—è—á–∏–π | 1.2 |
   | –õ—ë–≥–∫–∏–π | 1.375 |
   | –£–º–µ—Ä–µ–Ω–Ω—ã–π | 1.55 |
   | –í—ã—Å–æ–∫–∏–π | 1.725 |
   | –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–π | 1.9 |

3. **–¶–µ–ª–µ–≤—ã–µ –∫–∞–ª–æ—Ä–∏–∏:**
   - –ü–æ—Ö—É–¥–µ–Ω–∏–µ (Cut): `TDEE ‚àí 500` (–Ω–µ –Ω–∏–∂–µ `BMR √ó 1.1`)
   - –ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ (Maintain): `TDEE`
   - –ù–∞–±–æ—Ä (Bulk): `TDEE + 300..500`

4. **–ú–∞–∫—Ä–æ–Ω—É—Ç—Ä–∏–µ–Ω—Ç—ã (ISSN 2017):**
   - –ë–µ–ª–æ–∫: 1.6‚Äì2.2 –≥/–∫–≥ (cut ‚Üí 2.0, maintain ‚Üí 1.6, bulk ‚Üí 1.8)
   - –ñ–∏—Ä—ã: 25‚Äì35% –∫–∫–∞–ª, –º–∏–Ω–∏–º—É–º 0.5 –≥/–∫–≥
   - –£–≥–ª–µ–≤–æ–¥—ã: –æ—Å—Ç–∞—Ç–æ–∫

5. –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏: `heightCm`, `age`, `sex`, `activityLevel`

6. –ù–∞–ø–∏—Å–∞—Ç—å unit-—Ç–µ—Å—Ç—ã –¥–ª—è —Ñ–æ—Ä–º—É–ª

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**

```bash
xcodebuild -project ios/InventoryAI.xcodeproj \
  -scheme InventoryAI \
  -destination 'platform=iOS Simulator,name=iPhone 17 Pro' \
  test
```

---

### –ü—Ä–æ–º–ø—Ç 5: –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Å –æ–ø–∏—Å–∞–Ω–∏—è–º–∏ + –¥–µ—Ç–∞–ª—å–Ω—ã–π –ª–∏—Å—Ç

**–¶–µ–ª—å:** –î–æ–±–∞–≤–∏—Ç—å –æ–ø–∏—Å–∞–Ω–∏—è –∫ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è–º –∏ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –¥–µ—Ç–∞–ª–∏ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏.

**–§–∞–π–ª:**
- `ios/Features/Settings/SettingsAchievementsView.swift`

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**

1. –ü–æ–¥ –∫–∞–∂–¥—ã–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ–º –ø–æ–∫–∞–∑–∞—Ç—å:
   - –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å: `"–î–æ–±–∞–≤—å—Ç–µ 10 –ø—Ä–æ–¥—É–∫—Ç–æ–≤"`
   - –ü—Ä–æ–≥—Ä–µ—Å—Å –µ—Å–ª–∏ —á–∞—Å—Ç–∏—á–Ω–æ: `"7/10 –ø—Ä–æ–¥—É–∫—Ç–æ–≤"`

2. –ü–æ –Ω–∞–∂–∞—Ç–∏—é ‚Üí `DetailSheet`:
   - –ë–æ–ª—å—à–∞—è –∏–∫–æ–Ω–∫–∞, –∑–∞–≥–æ–ª–æ–≤–æ–∫
   - –û–ø–∏—Å–∞–Ω–∏–µ (–∫–∞–∫ –ø–æ–ª—É—á–∏—Ç—å)
   - `ProgressView` —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º
   - –î–∞—Ç–∞ –ø–æ–ª—É—á–µ–Ω–∏—è (–µ—Å–ª–∏ –ø–æ–ª—É—á–µ–Ω–æ)

3. –°—Ç–∏–ª–∏ –∏–∑ `DesignSystem.swift`

4. –ù–µ –ª–æ–º–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π (`ios/Models/Achievements.swift`)

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**

```bash
xcodebuild -project ios/InventoryAI.xcodeproj \
  -scheme InventoryAI \
  -destination 'platform=iOS Simulator,name=iPhone 17 Pro' \
  build
```

---

### –ü—Ä–æ–º–ø—Ç 6: –£–ª—É—á—à–µ–Ω–∏–µ –ø–ª–∞–Ω–æ–≤ –ø–∏—Ç–∞–Ω–∏—è (backend + iOS)

**–¶–µ–ª—å:** –†–∞—Å—à–∏—Ä–∏—Ç—å –±–∞–∑—É —Ä–µ—Ü–µ–ø—Ç–æ–≤, —É–ª—É—á—à–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–ª–∞–Ω–æ–≤ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π.

**–§–∞–π–ª—ã:**
- `backend/src/services/mealPlan.ts`
- `backend/src/services/recommendation.ts`
- `backend/src/data/mockRecipes.ts`
- `ios/Features/MealPlan/MealPlanView.swift`
- `ios/Features/MealPlan/WeeklyAutopilotView.swift`

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –ú–∞–ª–æ —Ä–µ—Ü–µ–ø—Ç–æ–≤, –ø–ª–∞–Ω—ã –ø–æ–≤—Ç–æ—Ä—è—é—Ç—Å—è, –Ω–µ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –º–∞–∫—Ä–æ-—Ü–µ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**

1. **–†–∞—Å—à–∏—Ä–∏—Ç—å `mockRecipes.ts`** ‚Äî –º–∏–Ω–∏–º—É–º 50 –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ä—É—Å—Å–∫–∏—Ö –±–ª—é–¥ —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ –ö–ë–ñ–£

2. **–£–ª—É—á—à–∏—Ç—å `mealPlan.ts`:**
   - –£—á–∏—Ç—ã–≤–∞—Ç—å –¥–Ω–µ–≤–Ω—ã–µ –ö–ë–ñ–£-—Ü–µ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –ë–µ–∑ –ø–æ–≤—Ç–æ—Ä–æ–≤ –≤ —Ç–µ—á–µ–Ω–∏–µ –Ω–µ–¥–µ–ª–∏
   - –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–∞–ª–æ—Ä–∏–π: –∑–∞–≤—Ç—Ä–∞–∫ 25%, –æ–±–µ–¥ 35%, —É–∂–∏–Ω 30%, –ø–µ—Ä–µ–∫—É—Å 10%

3. **–£–ª—É—á—à–∏—Ç—å `recommendation.ts`:**
   - –ü–æ–≤—ã—à–∞—Ç—å —Ä–µ–π—Ç–∏–Ω–≥ —Ä–µ—Ü–µ–ø—Ç–æ–≤, —Å–æ–≤–ø–∞–¥–∞—é—â–∏—Ö —Å –∑–∞–ø–∞—Å–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –®—Ç—Ä–∞—Ñ–æ–≤–∞—Ç—å –∑–∞ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã
   - –ë–æ–Ω—É—Å –∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∫–æ—Ä–æ–ø–æ—Ä—Ç—è—â–∏—Ö—Å—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤

4. –ó–∞–ø—É—Å—Ç–∏—Ç—å backend —Ç–µ—Å—Ç—ã

5. –°–æ–±—Ä–∞—Ç—å iOS

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**

```bash
# Backend —Ç–µ—Å—Ç—ã
cd backend && npm test

# iOS —Å–±–æ—Ä–∫–∞
xcodebuild -project ios/InventoryAI.xcodeproj \
  -scheme InventoryAI \
  -destination 'platform=iOS Simulator,name=iPhone 17 Pro' \
  build
```

---

### –ü—Ä–æ–º–ø—Ç 7: Smart-optimizer –∏ Goal picker –≤ —Å—Ç–∏–ª–µ Deficit Profile

**–¶–µ–ª—å:** –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å UI —Ç—Ä—ë—Ö –ø–∏–∫–µ—Ä–æ–≤ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¥–∏–µ—Ç—ã.

**–§–∞–π–ª:**
- `ios/Features/Settings/DietSettingsView.swift`

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**

1. –ù–∞–π—Ç–∏ —Ç–µ–∫—É—â–∏–π UI –ø–∏–∫–µ—Ä–∞ Deficit Profile (–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏)

2. –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ç–æ—Ç –∂–µ —Å—Ç–∏–ª—å –∫:
   - **Smart-optimizer picker** (`smartOptimizerProfile`)
   - **Goal picker** (`dietGoalMode`)

3. –ö–∞–∂–¥—ã–π –≤–∞—Ä–∏–∞–Ω—Ç:
   - –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞: –∏–∫–æ–Ω–∫–∞ + –∑–∞–≥–æ–ª–æ–≤–æ–∫ + –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
   - –í—ã–±—Ä–∞–Ω–Ω—ã–π: `Color.vayPrimary` fill, –±–µ–ª—ã–π —Ç–µ–∫—Å—Ç
   - cornerRadius / padding / spacing ‚Äî –∏–¥–µ–Ω—Ç–∏—á–Ω—ã Deficit Profile

4. **UI-only** ‚Äî –ª–æ–≥–∏–∫—É —Ä–∞—Å—á—ë—Ç–æ–≤ –Ω–µ –º–µ–Ω—è—Ç—å

5. –°—Ç–∏–ª–∏ –∏–∑ `DesignSystem.swift`

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**

```bash
xcodebuild -project ios/InventoryAI.xcodeproj \
  -scheme InventoryAI \
  -destination 'platform=iOS Simulator,name=iPhone 17 Pro' \
  build
```

---

### –ü—Ä–æ–º–ø—Ç 8: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–∞ –≥—Ä–∞—Ñ–∏–∫–∞ –ø–æ —Å–∫—Ä–∏–Ω—à–æ—Ç—É

**–¶–µ–ª—å:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤–∏–∑—É–∞–ª—å–Ω—ã–π –±–∞–≥ –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ (—Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–∫—Ä–∏–Ω—à–æ—Ç).

**–§–∞–π–ª—ã:**
- `ios/Features/Home/HomeView.swift`
- `ios/Features/Settings/BodyMetricsView.swift`

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –û–ø–∏—Å–∞—Ç—å —á—Ç–æ –≤–∏–¥–Ω–æ –Ω–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–µ –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å
- **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –¥–ª—è —ç—Ç–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–∏–ª–æ–∂–∏—Ç—å —Å–∫—Ä–∏–Ω—à–æ—Ç —Å –±–∞–≥–æ–º

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**

```bash
xcodebuild -project ios/InventoryAI.xcodeproj \
  -scheme InventoryAI \
  -destination 'platform=iOS Simulator,name=iPhone 17 Pro' \
  build
```

---

## H. –ò–¥–µ–∏ / Roadmap (–ë—ç–∫–ª–æ–≥)

| # | –ò–¥–µ—è | –û–ø–∏—Å–∞–Ω–∏–µ | –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ |
|---|------|----------|-----------------------|
| 1 | –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ–∫–æ–≤ | OCR —á–µ–∫–æ–≤ ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ | Vision framework, `ReceiptScanView.swift` —É–∂–µ –µ—Å—Ç—å |
| 2 | –ü–æ–ª–∏—Ä–æ–≤–∫–∞ —Ç—ë–º–Ω–æ–π —Ç–µ–º—ã | `preferredColorScheme` –µ—Å—Ç—å; –¥–æ–≤–µ—Å—Ç–∏ –¥–æ –∏–¥–µ–∞–ª–∞ –≤—Å–µ —ç–∫—Ä–∞–Ω—ã | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞–∂–¥—ã–π —ç–∫—Ä–∞–Ω, —É–±—Ä–∞—Ç—å —Ö–∞—Ä–¥–∫–æ–¥ —Ü–≤–µ—Ç–æ–≤ |
| 3 | –û—Ñ—Ñ–ª–∞–π–Ω-—à—Ç—Ä–∏—Ö–∫–æ–¥—ã | –õ–æ–∫–∞–ª—å–Ω–∞—è –ë–î Open Food Facts (~2 GB SQLite) | –û—Ç–¥–µ–ª—å–Ω—ã–π SQLite, —Ñ–æ–Ω–æ–≤–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è |
| 4 | –û—Ñ—Ñ–ª–∞–π–Ω-—Ä–µ—Ü–µ–ø—Ç—ã + —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –ë–î | –ë–æ–ª—å—à–∞—è –±–∞–∑–∞ —Ä–µ—Ü–µ–ø—Ç–æ–≤ + –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è —Ä–µ—Ü–µ–ø—Ç–æ–≤ –∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ | –õ–æ–∫–∞–ª—å–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥, CDN –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π |
| 5 | –ú–∞–∫—Å–∏–º—É–º —Å–µ—Ä–≤–∏—Å–æ–≤ –ø—Ä–æ–¥—É–∫—Ç–æ–≤/—Ä–µ—Ü–µ–ø—Ç–æ–≤ | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö API –¥–ª—è ¬´—Å—É–ø–µ—Ä—Å–∏–ª—ã¬ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è | –ê–¥–∞–ø—Ç–µ—Ä—ã –≤ `backend/src/ingestion/adapters/` |
| 6 | –ó–∞–∫–∞–∑ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ø–Ω–¥–µ–∫—Å –õ–∞–≤–∫–∞ / –°–∞–º–æ–∫–∞—Ç –¥–ª—è –∑–∞–∫–∞–∑–∞ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö | Deep links, API –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤ |

---

## –°–æ–≥–ª–∞—à–µ–Ω–∏—è –ø–æ –∫–æ–¥—É

### Swift / SwiftUI
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: MVVM-light (View + Service, –±–µ–∑ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö ViewModel-—Ñ–∞–π–ª–æ–≤)
- –°–æ—Å—Ç–æ—è–Ω–∏–µ: `@State`, `@EnvironmentObject` (—á–µ—Ä–µ–∑ `AppSettingsStore`)
- Persistence: GRDB (`ios/Persistence/`)
- –ù–∞–≤–∏–≥–∞—Ü–∏—è: `NavigationStack` + `sheet`
- –°—Ç–∏–ª–∏: **—Ç–æ–ª—å–∫–æ** —á–µ—Ä–µ–∑ `DesignSystem.swift` ‚Äî –∑–∞–ø—Ä–µ—â–µ–Ω—ã —Ö–∞—Ä–¥–∫–æ–¥ —Ü–≤–µ—Ç–∞ –∏ —Ä–∞–∑–º–µ—Ä—ã
- –ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ: camelCase –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, PascalCase –¥–ª—è —Ç–∏–ø–æ–≤

### TypeScript / Backend
- –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞: routes ‚Üí services ‚Üí data
- –í–∞–ª–∏–¥–∞—Ü–∏—è: Zod (`zod`)
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: Pino (`pino`)
- –¢–µ—Å—Ç—ã: Node.js native test runner (`node --test`)
- –°—Ç–∏–ª—å: ESLint

---

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 2026-02-19*
